apiVersion: v1
kind: ConfigMap
metadata:
  name: rustmq-controller-config
  namespace: rustmq
  labels:
    app.kubernetes.io/name: rustmq
    app.kubernetes.io/component: controller-config
data:
  controller.toml: |
    # RustMQ Controller Configuration
    # Generated by Kustomize

    [server]
    grpc_port = 9094
    admin_port = 9095
    raft_port = 9642

    [raft]
    heartbeat_interval_ms = 1000
    heartbeat_timeout_ms = 2000
    election_timeout_min_ms = 3000
    election_timeout_max_ms = 6000
    snapshot_interval_seconds = 3600

    [storage]
    wal_dir = "/var/lib/rustmq/wal"
    data_dir = "/var/lib/rustmq/data"
    wal_segment_size_mb = 64

    [logging]
    level = "info"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: rustmq-broker-config
  namespace: rustmq
  labels:
    app.kubernetes.io/name: rustmq
    app.kubernetes.io/component: broker-config
data:
  gcs_bucket: "rustmq-messages"  # Will be overridden by overlay
  broker.toml: |
    # RustMQ Broker Configuration
    # Generated by Kustomize

    [server]
    client_port = 9092
    internal_port = 9093

    [replication]
    min_in_sync_replicas = 2
    replication_factor = 3

    [cache]
    l2_cache_size_mb = 512
    l2_shard_multiplier = 2.0

    [logging]
    level = "info"

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: rustmq-admin-config
  namespace: rustmq
  labels:
    app.kubernetes.io/name: rustmq
    app.kubernetes.io/component: admin-config
data:
  admin.toml: |
    # RustMQ Admin Server Configuration
    # Generated by Kustomize

    [server]
    port = 8080

    [logging]
    level = "info"
